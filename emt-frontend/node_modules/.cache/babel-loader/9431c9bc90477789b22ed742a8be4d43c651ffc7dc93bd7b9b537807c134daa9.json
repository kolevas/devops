{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from \"react\";\nimport userRepository from \"../repository/userRepository\";\nconst useUsers = () => {\n  _s();\n  const [loggedInUser, setLoggedInUser] = useState(null);\n  const [loginState, setLoginState] = useState(false);\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwtToken\");\n    if (token) {\n      const user = JSON.parse(atob(token.split(\".\")[1])); // Assuming JWT has user info in payload\n      setLoggedInUser(user);\n    }\n  }, []);\n  const login = useCallback((username, password) => {\n    userRepository.login(username, password).then(() => {\n      const token = localStorage.getItem(\"jwtToken\");\n      if (token) {\n        const user = JSON.parse(atob(token.split(\".\")[1]));\n        setLoggedInUser(user);\n        setLoginState(true);\n      }\n    }).catch(error => console.log(error));\n  }, []);\n\n  // const login = async (username, password) => {\n  //     await userRepository.login(username, password);\n  //     const token = localStorage.getItem(\"jwtToken\");\n  //     if (token) {\n  //         const user = JSON.parse(atob(token.split(\".\")[1]));\n  //         setLoggedInUser(user);\n  //     }\n  // };\n\n  const logout = () => {\n    userRepository.logout();\n    setLoggedInUser(null);\n    setLoginState(false);\n  };\n\n  // const isAuthenticated = () => !!localStorage.getItem(\"jwtToken\");\n\n  return {\n    loggedInUser,\n    login,\n    logout,\n    loginState\n    // isAuthenticated,\n  };\n};\n_s(useUsers, \"luNHqx7W30jPj4MbY4u46VIspMo=\");\nexport default useUsers;","map":{"version":3,"names":["useCallback","useEffect","useState","userRepository","useUsers","_s","loggedInUser","setLoggedInUser","loginState","setLoginState","token","localStorage","getItem","user","JSON","parse","atob","split","login","username","password","then","catch","error","console","log","logout"],"sources":["/Users/snezhanakoleva/IdeaProjects/EMT/emt-frontend/src/hooks/useUsers.js"],"sourcesContent":["import {useCallback, useEffect, useState} from \"react\";\nimport userRepository from \"../repository/userRepository\";\n\nconst useUsers = () => {\n    const [loggedInUser, setLoggedInUser] = useState(null);\n    const [loginState, setLoginState] = useState(false)\n    useEffect(() => {\n        const token = localStorage.getItem(\"jwtToken\");\n        if (token) {\n            const user = JSON.parse(atob(token.split(\".\")[1])); // Assuming JWT has user info in payload\n            setLoggedInUser(user);\n        }\n    }, []);\n\n    const login = useCallback((username, password)=>{\n        userRepository\n            .login(username, password)\n            .then(()=> {\n                const token = localStorage.getItem(\"jwtToken\");\n                if (token) {\n                    const user = JSON.parse(atob(token.split(\".\")[1]));\n                    setLoggedInUser(user);\n                    setLoginState(true)\n                }\n            })\n            .catch((error) => console.log(error));\n    }, [])\n\n    // const login = async (username, password) => {\n    //     await userRepository.login(username, password);\n    //     const token = localStorage.getItem(\"jwtToken\");\n    //     if (token) {\n    //         const user = JSON.parse(atob(token.split(\".\")[1]));\n    //         setLoggedInUser(user);\n    //     }\n    // };\n\n    const logout = () => {\n        userRepository.logout();\n        setLoggedInUser(null);\n        setLoginState(false)\n    };\n\n    // const isAuthenticated = () => !!localStorage.getItem(\"jwtToken\");\n\n\n    return {\n        loggedInUser,\n        login,\n        logout,\n        loginState\n        // isAuthenticated,\n    };\n};\n\nexport default useUsers;\n"],"mappings":";AAAA,SAAQA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACtD,OAAOC,cAAc,MAAM,8BAA8B;AAEzD,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACM,UAAU,EAAEC,aAAa,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACnDD,SAAS,CAAC,MAAM;IACZ,MAAMS,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAC9C,IAAIF,KAAK,EAAE;MACP,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpDV,eAAe,CAACM,IAAI,CAAC;IACzB;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMK,KAAK,GAAGlB,WAAW,CAAC,CAACmB,QAAQ,EAAEC,QAAQ,KAAG;IAC5CjB,cAAc,CACTe,KAAK,CAACC,QAAQ,EAAEC,QAAQ,CAAC,CACzBC,IAAI,CAAC,MAAK;MACP,MAAMX,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;MAC9C,IAAIF,KAAK,EAAE;QACP,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClDV,eAAe,CAACM,IAAI,CAAC;QACrBJ,aAAa,CAAC,IAAI,CAAC;MACvB;IACJ,CAAC,CAAC,CACDa,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;EAC7C,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACjBvB,cAAc,CAACuB,MAAM,CAAC,CAAC;IACvBnB,eAAe,CAAC,IAAI,CAAC;IACrBE,aAAa,CAAC,KAAK,CAAC;EACxB,CAAC;;EAED;;EAGA,OAAO;IACHH,YAAY;IACZY,KAAK;IACLQ,MAAM;IACNlB;IACA;EACJ,CAAC;AACL,CAAC;AAACH,EAAA,CAlDID,QAAQ;AAoDd,eAAeA,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}