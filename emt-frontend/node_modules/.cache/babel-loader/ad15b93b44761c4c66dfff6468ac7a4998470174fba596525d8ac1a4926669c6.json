{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from \"react\";\nimport userRepository from \"../repository/userRepository\";\nconst useUsers = () => {\n  _s();\n  const [loggedInUser, setLoggedInUser] = useState(null);\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwtToken\");\n    if (token) {\n      const user = JSON.parse(atob(token.split(\".\")[1])); // Assuming JWT has user info in payload\n      setLoggedInUser(user);\n    }\n  }, [loggedInUser]);\n  const login = useCallback((username, password) => {\n    userRepository.login(username, password).then(() => {\n      const token = localStorage.getItem(\"jwtToken\");\n      if (token) {\n        const user = JSON.parse(atob(token.split(\".\")[1]));\n        setLoggedInUser(user);\n      }\n    }).catch(error => console.log(error));\n  }, []);\n\n  // const login = async (username, password) => {\n  //     await userRepository.login(username, password);\n  //     const token = localStorage.getItem(\"jwtToken\");\n  //     if (token) {\n  //         const user = JSON.parse(atob(token.split(\".\")[1]));\n  //         setLoggedInUser(user);\n  //     }\n  // };\n\n  const logout = () => {\n    userRepository.logout();\n    setLoggedInUser(null);\n  };\n\n  // const isAuthenticated = () => !!localStorage.getItem(\"jwtToken\");\n\n  return {\n    loggedInUser,\n    login,\n    logout\n    // isAuthenticated,\n  };\n};\n_s(useUsers, \"9vdP99o1gC79jq6Ry5GZ+yVdvkU=\");\nexport default useUsers;","map":{"version":3,"names":["useCallback","useEffect","useState","userRepository","useUsers","_s","loggedInUser","setLoggedInUser","token","localStorage","getItem","user","JSON","parse","atob","split","login","username","password","then","catch","error","console","log","logout"],"sources":["/Users/snezhanakoleva/IdeaProjects/EMT/emt-frontend/src/hooks/useUsers.js"],"sourcesContent":["import {useCallback, useEffect, useState} from \"react\";\nimport userRepository from \"../repository/userRepository\";\n\nconst useUsers = () => {\n    const [loggedInUser, setLoggedInUser] = useState(null);\n\n    useEffect(() => {\n        const token = localStorage.getItem(\"jwtToken\");\n        if (token) {\n            const user = JSON.parse(atob(token.split(\".\")[1])); // Assuming JWT has user info in payload\n            setLoggedInUser(user);\n        }\n    }, [loggedInUser]);\n\n    const login = useCallback((username, password)=>{\n        userRepository\n            .login(username, password)\n            .then(()=> {\n                const token = localStorage.getItem(\"jwtToken\");\n                if (token) {\n                    const user = JSON.parse(atob(token.split(\".\")[1]));\n                    setLoggedInUser(user);\n                }\n            })\n            .catch((error) => console.log(error));\n    }, [])\n    \n    // const login = async (username, password) => {\n    //     await userRepository.login(username, password);\n    //     const token = localStorage.getItem(\"jwtToken\");\n    //     if (token) {\n    //         const user = JSON.parse(atob(token.split(\".\")[1]));\n    //         setLoggedInUser(user);\n    //     }\n    // };\n\n    const logout = () => {\n        userRepository.logout();\n        setLoggedInUser(null);\n    };\n\n    // const isAuthenticated = () => !!localStorage.getItem(\"jwtToken\");\n\n\n    return {\n        loggedInUser,\n        login,\n        logout,\n        // isAuthenticated,\n    };\n};\n\nexport default useUsers;\n"],"mappings":";AAAA,SAAQA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACtD,OAAOC,cAAc,MAAM,8BAA8B;AAEzD,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EAEtDD,SAAS,CAAC,MAAM;IACZ,MAAMO,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAC9C,IAAIF,KAAK,EAAE;MACP,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpDR,eAAe,CAACI,IAAI,CAAC;IACzB;EACJ,CAAC,EAAE,CAACL,YAAY,CAAC,CAAC;EAElB,MAAMU,KAAK,GAAGhB,WAAW,CAAC,CAACiB,QAAQ,EAAEC,QAAQ,KAAG;IAC5Cf,cAAc,CACTa,KAAK,CAACC,QAAQ,EAAEC,QAAQ,CAAC,CACzBC,IAAI,CAAC,MAAK;MACP,MAAMX,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;MAC9C,IAAIF,KAAK,EAAE;QACP,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClDR,eAAe,CAACI,IAAI,CAAC;MACzB;IACJ,CAAC,CAAC,CACDS,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;EAC7C,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACjBrB,cAAc,CAACqB,MAAM,CAAC,CAAC;IACvBjB,eAAe,CAAC,IAAI,CAAC;EACzB,CAAC;;EAED;;EAGA,OAAO;IACHD,YAAY;IACZU,KAAK;IACLQ;IACA;EACJ,CAAC;AACL,CAAC;AAACnB,EAAA,CA/CID,QAAQ;AAiDd,eAAeA,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}